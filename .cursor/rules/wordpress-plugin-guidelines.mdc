---
description: WordPress plugin guidelines for .org repository - security, i18n, scripts/styles, uninstall
alwaysApply: true
---

# WordPress Plugin Guidelines (Repository Checklist)

Follow these rules so the plugin passes WordPress.org repository review.

## Security

### Direct file access
- **Prevent direct access**: Start every PHP file (except uninstall.php) with:
  `if ( ! defined( 'ABSPATH' ) ) { exit; }`

### Input & output
- **Sanitize all inputs**: Use `sanitize_text_field()`, `sanitize_email()`, `absint()`, etc. on every user/request input before use or storage.
- **Validate all inputs**: Validate type, format, and allowed values; reject invalid data.
- **Escape all outputs**: Use `esc_html()`, `esc_attr()`, `esc_url()`, `wp_kses_post()` when outputting to HTML/JS/attributes.

### Forms & AJAX
- **Nonce in forms**: Use `wp_nonce_field()` and verify with `wp_verify_nonce()` on submit.
- **Nonce in AJAX**: Send nonce in request; verify with `check_ajax_referer()` in the handler.

### Capabilities
- **Check capability**: Before any admin/sensitive action use `current_user_can( 'manage_options' )` (or the appropriate capability).

### Forbidden / dangerous
- **Do not use**: `eval()`, `base64_decode()` for executable code, `exec`, `shell_exec`, `system`, `passthru`, or `preg_replace` with `/e` modifier.
- **Prevent**: XSS (escape output, validate/sanitize input), CSRF (nonces), RCE (no unsafe eval/exec), IDOR (check ownership/permissions), SSRF (validate URLs, block internal hosts).

---

## Translation & i18n

- **Load text domain**: Call `load_plugin_textdomain( 'plugifity', false, dirname( plugin_basename( PLUGIFITY_PLUGIN_FILE ) ) . '/languages' );` (e.g. in `App` or on `plugins_loaded`).
- **Translate strings**: Use `__()`, `_e()`, `_x()`, `esc_html__()`, `esc_attr__()` with text domain `plugifity`; no hard-coded user-facing text.
- **Single text domain**: Use one consistent text domain for the whole plugin (e.g. `plugifity`).
- **.pot file**: Provide a `.pot` in `/languages/` for translators.

---

## Scripts & styles

- **Enqueue only**: Use `wp_enqueue_script()` and `wp_enqueue_style()`; do not print scripts/styles directly in `wp_head` or body.
- **No direct wp_head**: Do not inject raw `<script>`/`<link>` in `wp_head`; use the enqueue API and hooks.
- **CDN**: Do not load scripts/styles from CDN without documenting it and ensuring it is acceptable for the repo.
- **Versioning**: Pass a version (e.g. plugin version constant) as the last argument of `wp_enqueue_script`/`wp_enqueue_style`.
- **Dependencies**: Declare correct `$deps` (e.g. `['jquery']`) so WordPress loads them in order.

---

## Install & uninstall

- **uninstall.php**: Provide an `uninstall.php` in the plugin root that runs when the plugin is deleted from the Plugins screen. Use it only for cleanup (options, transients, custom tables if desired). Do not use `uninstall.php` for deactivation logic; use deactivation hook for that.
